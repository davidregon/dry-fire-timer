<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dry Fire Pro Timer - Regon Tactical</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    
    <div id="header-motto">
        SÉ DIFÍCIL DE MATAR | Regon Tactical
    </div>

    <div id="mode-tabs">
        <button id="dryFireTab" class="active">DRY FIRE TIMER</button>
        <button id="mmaTab">MMA TIMER</button>
    </div>

    <div class="container">
        <h1>REGON TACTICAL TIMER</h1>

        <div id="app-content">

            <div id="dryFireContent" class="tab-content active">
                
                <div class="input-group">
                    <label for="modeSelector">MODO DE ENTRENAMIENTO</label>
                    <select id="modeSelector">
                        <option value="manual">Manual (Retardo Fijo)</option>
                        <option value="pro">Aleatorio Pro (Retardo Variable)</option>
                    </select>
                </div>
                
                <div class="display-area">
                    <div id="counter">00.00</div>
                    <div id="status">CONFIGURA Y PULSA INICIAR</div>
                </div>

                <div class="controls-panel">
                    <h2>CONFIGURACIÓN DE ENTRENAMIENTO</h2>
                    
                    <div class="input-group" id="minDelayGroup">
                        <label for="minDelay" id="minDelayLabel">RETARDO (s)</label> 
                        <input type="number" id="minDelay" value="1.0" min="0.5" step="0.1">
                    </div>

                    <div class="input-group" id="maxDelayGroup" style="display: none;">
                        <label for="maxDelay">RETARDO MÁX. (s)</label>
                        <input type="number" id="maxDelay" value="4.0" min="1.0" step="0.1">
                    </div>
                    
                    <hr>
                    
                    <div class="input-group" id="parTimeGroup">
                        <label for="parTime">TIEMPO LÍMITE (s)</label>
                        <input type="number" id="parTime" value="1.50" min="0.10" step="0.05">
                    </div>

                    <hr id="repRestSeparator">

                    <div class="input-group" id="repetitionsGroup">
                        <label for="repetitions">REPETICIONES</label>
                        <input type="number" id="repetitions" value="10" min="1">
                    </div>
                    <div class="input-group" id="restTimeGroup">
                        <label for="restTime">DESCANSO (s)</label>
                        <input type="number" id="restTime" value="3.0" min="1.0" step="0.5">
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="startButton">INICIAR</button>
                    <button id="stopButton" disabled>DETENER</button>
                </div>

                <p class="current-set" id="currentSet">Set: 0/0</p>

                <div class="log-panel" id="logPanel">
                    <h2>REGISTRO AUTOMÁTICO</h2>
                    <table id="logTable">
                        <thead>
                            <tr>
                                <th>Set</th>
                                <th>Retardo (Min-Max)</th>
                                <th>Tiempo Límite (s)</th>
                                <th>Tiempo Límite (s)</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                    <p class="note">El registro muestra el **Tiempo Límite** establecido para cada set. La práctica es terminar la acción antes del segundo pitido.</p>
                </div>
            </div> 

            <div id="mmaContent" class="tab-content hidden">

                <div class="controls-panel">
                    <h2>CONFIGURACIÓN MMA</h2>
                    
                    <div class="input-group">
                        <label for="mmaModeSelector">MODO DE ASALTO</label>
                        <select id="mmaModeSelector">
                            <option value="fixed">Fijo (Tiempo/Descanso constante)</option>
                            <option value="random">Aleatorio (Tiempos de asalto variables)</option>
                        </select>
                    </div>

                    <div class="input-group" id="mmaRoundTimeGroup">
                        <label for="mmaRoundTime">TIEMPO ASALTO (min)</label>
                        <input type="number" id="mmaRoundTime" value="5" min="1" step="1">
                    </div>

                    <div id="mmaRandomRange" class="hidden">
                        <div class="input-group">
                            <label for="mmaMinRound">ASALTO MIN (min)</label>
                            <input type="number" id="mmaMinRound" value="3" min="1" max="9" step="1">
                        </div>
                        <div class="input-group">
                            <label for="mmaMaxRound">ASALTO MÁX (min)</label>
                            <input type="number" id="mmaMaxRound" value="10" min="4" max="10" step="1">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="mmaRestTime">DESCANSO (s)</label>
                        <input type="number" id="mmaRestTime" value="60" min="10" step="5">
                    </div>

                    <div class="input-group">
                        <label for="mmaRounds">NÚMERO DE ASALTOS</label>
                        <input type="number" id="mmaRounds" value="5" min="1">
                    </div>
                </div>

                <hr>

                <div class="display-area">
                    <div id="mmaCounter">00:00</div>
                    <div id="mmaStatus">LISTO PARA EL COMBATE</div>
                    <p id="mmaCurrentRound" class="current-set">ASALTO: 0/0 - ESTADO: DESCANSO</p>
                </div>

                <div class="button-group">
                    <button id="mmaStartButton">INICIAR ASALTOS</button>
                    <button id="mmaStopButton" disabled>DETENER</button>
                </div>
                
                <div class="log-panel" id="mmaLogPanel">
                    <h2>HISTORIAL DE ASALTOS</h2>
                    <table id="mmaLogTable">
                        <thead>
                            <tr>
                                <th>Asalto</th>
                                <th>Tiempo Asalto (min)</th>
                                <th>Descanso (s)</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>

            </div>

        </div>
    </div>

    <!-- Wake Lock para iOS (vídeo invisible) -->
    <video id="iosWakeLock" playsinline muted loop style="display:none; width:0; height:0;">
        <source src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDFtcDQxaXNvbWF2YzEAAAAIZnJlZQAAACxtZGF0AAAAAA==" type="video/mp4">
    </video>

    <script src="script.js"></script>
</body>
</html>
